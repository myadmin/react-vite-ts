import{r as l,_ as Wt,p as Bt,q as Ce,s as Xe,v as mt,w as Pe,c as H,x as qe,y as ft,g as gt,m as ht,a as vt,u as te,K as ze,z as Xt,C as Ne,o as qt,A as zt,D as Ht,E as Gt,F as Vt,G as Kt,H as xe,I as oe,J as ge,L as bt,M as yt,N as $t,O as V,P as ne,Q as wt,R as He,U as Jt,b as Ct,t as xt,V as Yt,W as et,X as Zt,Y as Qt,Z as er,$ as tr,a0 as St,a1 as rr,a2 as nr,a3 as tt,a4 as ar,a5 as ir,a6 as Ge,a7 as or,B as ve,a8 as sr,a9 as lr,aa as cr,ab as dr,ac as rt,h as ur,ad as pr,j as f,ae as K,af as $e,ag as mr,ah as fr,n as Ee,ai as pe,aj as nt,ak as Se,al as It,am as at}from"./index-4f38f5ec.js";import{M as jt,S as Y,u as gr,T as hr}from"./index-af8ae3be.js";import{a as vr}from"./role-6278619b.js";import{T as it}from"./index-c2c31820.js";import{a as br}from"./useBreakpoint-1fe58ea1.js";var yr={percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},$r=function(){var t=l.useRef([]),r=l.useRef(null);return l.useEffect(function(){var n=Date.now(),i=!1;t.current.forEach(function(o){if(o){i=!0;var s=o.style;s.transitionDuration=".3s, .3s, .3s, .06s",r.current&&n-r.current<100&&(s.transitionDuration="0s, 0s")}}),i&&(r.current=Date.now())}),t.current},ot=0,wr=Bt();function Cr(){var e;return wr?(e=ot,ot+=1):e="TEST_OR_SSR",e}const xr=function(e){var t=l.useState(),r=Wt(t,2),n=r[0],i=r[1];return l.useEffect(function(){i("rc_progress_".concat(Cr()))},[]),e||n};var st=function(t){var r=t.bg,n=t.children;return l.createElement("div",{style:{width:"100%",height:"100%",background:r}},n)};function lt(e,t){return Object.keys(e).map(function(r){var n=parseFloat(r),i="".concat(Math.floor(n*t),"%");return"".concat(e[r]," ").concat(i)})}var Sr=l.forwardRef(function(e,t){var r=e.prefixCls,n=e.color,i=e.gradientId,o=e.radius,s=e.style,a=e.ptg,u=e.strokeLinecap,c=e.strokeWidth,p=e.size,g=e.gapDegree,m=n&&Ce(n)==="object",h=m?"#FFF":void 0,v=p/2,b=l.createElement("circle",{className:"".concat(r,"-circle-path"),r:o,cx:v,cy:v,stroke:h,strokeLinecap:u,strokeWidth:c,opacity:a===0?0:1,style:s,ref:t});if(!m)return b;var y="".concat(i,"-conic"),C=g?"".concat(180+g/2,"deg"):"0deg",$=lt(n,(360-g)/360),O=lt(n,1),I="conic-gradient(from ".concat(C,", ").concat($.join(", "),")"),d="linear-gradient(to ".concat(g?"bottom":"top",", ").concat(O.join(", "),")");return l.createElement(l.Fragment,null,l.createElement("mask",{id:y},b),l.createElement("foreignObject",{x:0,y:0,width:p,height:p,mask:"url(#".concat(y,")")},l.createElement(st,{bg:d},l.createElement(st,{bg:I}))))}),Ie=100,Ue=function(t,r,n,i,o,s,a,u,c,p){var g=arguments.length>10&&arguments[10]!==void 0?arguments[10]:0,m=n/100*360*((360-s)/360),h=s===0?0:{bottom:0,top:180,left:90,right:-90}[a],v=(100-i)/100*r;c==="round"&&i!==100&&(v+=p/2,v>=r&&(v=r-.01));var b=Ie/2;return{stroke:typeof u=="string"?u:void 0,strokeDasharray:"".concat(r,"px ").concat(t),strokeDashoffset:v+g,transform:"rotate(".concat(o+m+h,"deg)"),transformOrigin:"".concat(b,"px ").concat(b,"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},Ir=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function ct(e){var t=e??[];return Array.isArray(t)?t:[t]}var jr=function(t){var r=Xe(Xe({},yr),t),n=r.id,i=r.prefixCls,o=r.steps,s=r.strokeWidth,a=r.trailWidth,u=r.gapDegree,c=u===void 0?0:u,p=r.gapPosition,g=r.trailColor,m=r.strokeLinecap,h=r.style,v=r.className,b=r.strokeColor,y=r.percent,C=mt(r,Ir),$=Ie/2,O=xr(n),I="".concat(O,"-gradient"),d=$-s/2,x=Math.PI*2*d,S=c>0?90+c/2:-90,P=x*((360-c)/360),M=Ce(o)==="object"?o:{count:o,gap:2},j=M.count,_=M.gap,ae=ct(y),Z=ct(b),re=Z.find(function(X){return X&&Ce(X)==="object"}),Q=re&&Ce(re)==="object",R=Q?"butt":m,F=Ue(x,P,0,100,S,c,p,g,R,s),se=$r(),J=function(){var q=0;return ae.map(function(G,w){var N=Z[w]||Z[Z.length-1],z=Ue(x,P,q,G,S,c,p,N,R,s);return q+=G,l.createElement(Sr,{key:w,color:N,ptg:G,radius:d,prefixCls:i,gradientId:I,style:z,strokeLinecap:R,strokeWidth:s,gapDegree:c,ref:function(ie){se[w]=ie},size:Ie})}).reverse()},B=function(){var q=Math.round(j*(ae[0]/100)),G=100/j,w=0;return new Array(j).fill(null).map(function(N,z){var W=z<=q-1?Z[0]:g,ie=W&&Ce(W)==="object"?"url(#".concat(I,")"):void 0,ce=Ue(x,P,w,G,S,c,p,W,"butt",s,_);return w+=(P-ce.strokeDashoffset+_)*100/P,l.createElement("circle",{key:z,className:"".concat(i,"-circle-path"),r:d,cx:$,cy:$,stroke:ie,strokeWidth:s,opacity:1,style:ce,ref:function(me){se[z]=me}})})};return l.createElement("svg",Pe({className:H("".concat(i,"-circle"),v),viewBox:"0 0 ".concat(Ie," ").concat(Ie),style:h,id:n,role:"presentation"},C),!j&&l.createElement("circle",{className:"".concat(i,"-circle-trail"),r:d,cx:$,cy:$,stroke:g,strokeLinecap:R,strokeWidth:a||s,style:F}),j?B():J())};function he(e){return!e||e<0?0:e>100?100:e}function ke(e){let{success:t,successPercent:r}=e,n=r;return t&&"progress"in t&&(n=t.progress),t&&"percent"in t&&(n=t.percent),n}const Er=e=>{let{percent:t,success:r,successPercent:n}=e;const i=he(ke({success:r,successPercent:n}));return[i,he(he(t)-i)]},Or=e=>{let{success:t={},strokeColor:r}=e;const{strokeColor:n}=t;return[n||qe.green,r||null]},Le=(e,t,r)=>{var n,i,o,s;let a=-1,u=-1;if(t==="step"){const c=r.steps,p=r.strokeWidth;typeof e=="string"||typeof e>"u"?(a=e==="small"?2:14,u=p??8):typeof e=="number"?[a,u]=[e,e]:[a=14,u=8]=Array.isArray(e)?e:[e.width,e.height],a*=c}else if(t==="line"){const c=r==null?void 0:r.strokeWidth;typeof e=="string"||typeof e>"u"?u=c||(e==="small"?6:8):typeof e=="number"?[a,u]=[e,e]:[a=-1,u=8]=Array.isArray(e)?e:[e.width,e.height]}else(t==="circle"||t==="dashboard")&&(typeof e=="string"||typeof e>"u"?[a,u]=e==="small"?[60,60]:[120,120]:typeof e=="number"?[a,u]=[e,e]:Array.isArray(e)&&(a=(i=(n=e[0])!==null&&n!==void 0?n:e[1])!==null&&i!==void 0?i:120,u=(s=(o=e[0])!==null&&o!==void 0?o:e[1])!==null&&s!==void 0?s:120));return[a,u]},Dr=3,Pr=e=>Dr/e*100,kr=e=>{const{prefixCls:t,trailColor:r=null,strokeLinecap:n="round",gapPosition:i,gapDegree:o,width:s=120,type:a,children:u,success:c,size:p=s,steps:g}=e,[m,h]=Le(p,"circle");let{strokeWidth:v}=e;v===void 0&&(v=Math.max(Pr(m),6));const b={width:m,height:h,fontSize:m*.15+6},y=l.useMemo(()=>{if(o||o===0)return o;if(a==="dashboard")return 75},[o,a]),C=Er(e),$=i||a==="dashboard"&&"bottom"||void 0,O=Object.prototype.toString.call(e.strokeColor)==="[object Object]",I=Or({success:c,strokeColor:e.strokeColor}),d=H(`${t}-inner`,{[`${t}-circle-gradient`]:O}),x=l.createElement(jr,{steps:g,percent:g?C[1]:C,strokeWidth:v,trailWidth:v,strokeColor:g?I[1]:I,strokeLinecap:n,trailColor:r,prefixCls:t,gapDegree:y,gapPosition:$}),S=m<=20,P=l.createElement("div",{className:d,style:b},x,!S&&u);return S?l.createElement(ft,{title:u},P):P},Fr=kr,Fe="--progress-line-stroke-color",Et="--progress-percent",dt=e=>{const t=e?"100%":"-100%";return new ze(`antProgress${e?"RTL":"LTR"}Active`,{"0%":{transform:`translateX(${t}) scaleX(0)`,opacity:.1},"20%":{transform:`translateX(${t}) scaleX(0)`,opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}})},Nr=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:Object.assign(Object.assign({},vt(e)),{display:"inline-block","&-rtl":{direction:"rtl"},"&-line":{position:"relative",width:"100%",fontSize:e.fontSize},[`${t}-outer`]:{display:"inline-flex",alignItems:"center",width:"100%"},[`${t}-inner`]:{position:"relative",display:"inline-block",width:"100%",flex:1,overflow:"hidden",verticalAlign:"middle",backgroundColor:e.remainingColor,borderRadius:e.lineBorderRadius},[`${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.defaultColor}},[`${t}-success-bg, ${t}-bg`]:{position:"relative",background:e.defaultColor,borderRadius:e.lineBorderRadius,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`},[`${t}-layout-bottom`]:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",[`${t}-text`]:{width:"max-content",marginInlineStart:0,marginTop:e.marginXXS}},[`${t}-bg`]:{overflow:"hidden","&::after":{content:'""',background:{_multi_value_:!0,value:["inherit",`var(${Fe})`]},height:"100%",width:`calc(1 / var(${Et}) * 100%)`,display:"block"},[`&${t}-bg-inner`]:{minWidth:"max-content","&::after":{content:"none"},[`${t}-text-inner`]:{color:e.colorWhite,[`&${t}-text-bright`]:{color:"rgba(0, 0, 0, 0.45)"}}}},[`${t}-success-bg`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,backgroundColor:e.colorSuccess},[`${t}-text`]:{display:"inline-block",marginInlineStart:e.marginXS,color:e.colorText,lineHeight:1,width:"2em",whiteSpace:"nowrap",textAlign:"start",verticalAlign:"middle",wordBreak:"normal",[r]:{fontSize:e.fontSize},[`&${t}-text-outer`]:{width:"max-content"},[`&${t}-text-outer${t}-text-start`]:{width:"max-content",marginInlineStart:0,marginInlineEnd:e.marginXS}},[`${t}-text-inner`]:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",marginInlineStart:0,padding:`0 ${te(e.paddingXXS)}`,[`&${t}-text-start`]:{justifyContent:"start"},[`&${t}-text-end`]:{justifyContent:"end"}},[`&${t}-status-active`]:{[`${t}-bg::before`]:{position:"absolute",inset:0,backgroundColor:e.colorBgContainer,borderRadius:e.lineBorderRadius,opacity:0,animationName:dt(),animationDuration:e.progressActiveMotionDuration,animationTimingFunction:e.motionEaseOutQuint,animationIterationCount:"infinite",content:'""'}},[`&${t}-rtl${t}-status-active`]:{[`${t}-bg::before`]:{animationName:dt(!0)}},[`&${t}-status-exception`]:{[`${t}-bg`]:{backgroundColor:e.colorError},[`${t}-text`]:{color:e.colorError}},[`&${t}-status-exception ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorError}},[`&${t}-status-success`]:{[`${t}-bg`]:{backgroundColor:e.colorSuccess},[`${t}-text`]:{color:e.colorSuccess}},[`&${t}-status-success ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorSuccess}}})}},Lr=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:{[`${t}-circle-trail`]:{stroke:e.remainingColor},[`&${t}-circle ${t}-inner`]:{position:"relative",lineHeight:1,backgroundColor:"transparent"},[`&${t}-circle ${t}-text`]:{position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:e.circleTextColor,fontSize:e.circleTextFontSize,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)",[r]:{fontSize:e.circleIconFontSize}},[`${t}-circle&-status-exception`]:{[`${t}-text`]:{color:e.colorError}},[`${t}-circle&-status-success`]:{[`${t}-text`]:{color:e.colorSuccess}}},[`${t}-inline-circle`]:{lineHeight:1,[`${t}-inner`]:{verticalAlign:"bottom"}}}},Rr=e=>{const{componentCls:t}=e;return{[t]:{[`${t}-steps`]:{display:"inline-block","&-outer":{display:"flex",flexDirection:"row",alignItems:"center"},"&-item":{flexShrink:0,minWidth:e.progressStepMinWidth,marginInlineEnd:e.progressStepMarginInlineEnd,backgroundColor:e.remainingColor,transition:`all ${e.motionDurationSlow}`,"&-active":{backgroundColor:e.defaultColor}}}}}},Tr=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:{[`${t}-small&-line, ${t}-small&-line ${t}-text ${r}`]:{fontSize:e.fontSizeSM}}}},Ar=e=>({circleTextColor:e.colorText,defaultColor:e.colorInfo,remainingColor:e.colorFillSecondary,lineBorderRadius:100,circleTextFontSize:"1em",circleIconFontSize:`${e.fontSize/e.fontSizeSM}em`}),Ur=gt("Progress",e=>{const t=e.calc(e.marginXXS).div(2).equal(),r=ht(e,{progressStepMarginInlineEnd:t,progressStepMinWidth:t,progressActiveMotionDuration:"2.4s"});return[Nr(r),Lr(r),Rr(r),Tr(r)]},Ar);var Mr=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const _r=e=>{let t=[];return Object.keys(e).forEach(r=>{const n=parseFloat(r.replace(/%/g,""));isNaN(n)||t.push({key:n,value:e[r]})}),t=t.sort((r,n)=>r.key-n.key),t.map(r=>{let{key:n,value:i}=r;return`${i} ${n}%`}).join(", ")},Wr=(e,t)=>{const{from:r=qe.blue,to:n=qe.blue,direction:i=t==="rtl"?"to left":"to right"}=e,o=Mr(e,["from","to","direction"]);if(Object.keys(o).length!==0){const a=_r(o),u=`linear-gradient(${i}, ${a})`;return{background:u,[Fe]:u}}const s=`linear-gradient(${i}, ${r}, ${n})`;return{background:s,[Fe]:s}},Br=e=>{const{prefixCls:t,direction:r,percent:n,size:i,strokeWidth:o,strokeColor:s,strokeLinecap:a="round",children:u,trailColor:c=null,percentPosition:p,success:g}=e,{align:m,type:h}=p,v=s&&typeof s!="string"?Wr(s,r):{[Fe]:s,background:s},b=a==="square"||a==="butt"?0:void 0,y=i??[-1,o||(i==="small"?6:8)],[C,$]=Le(y,"line",{strokeWidth:o}),O={backgroundColor:c||void 0,borderRadius:b},I=Object.assign(Object.assign({width:`${he(n)}%`,height:$,borderRadius:b},v),{[Et]:he(n)/100}),d=ke(e),x={width:`${he(d)}%`,height:$,borderRadius:b,backgroundColor:g==null?void 0:g.strokeColor},S={width:C<0?"100%":C},P=l.createElement("div",{className:`${t}-inner`,style:O},l.createElement("div",{className:H(`${t}-bg`,`${t}-bg-${h}`),style:I},h==="inner"&&u),d!==void 0&&l.createElement("div",{className:`${t}-success-bg`,style:x})),M=h==="outer"&&m==="start",j=h==="outer"&&m==="end";return h==="outer"&&m==="center"?l.createElement("div",{className:`${t}-layout-bottom`},P,u):l.createElement("div",{className:`${t}-outer`,style:S},M&&u,P,j&&u)},Xr=Br,qr=e=>{const{size:t,steps:r,percent:n=0,strokeWidth:i=8,strokeColor:o,trailColor:s=null,prefixCls:a,children:u}=e,c=Math.round(r*(n/100)),g=t??[t==="small"?2:14,i],[m,h]=Le(g,"step",{steps:r,strokeWidth:i}),v=m/r,b=new Array(r);for(let y=0;y<r;y++){const C=Array.isArray(o)?o[y]:o;b[y]=l.createElement("div",{key:y,className:H(`${a}-steps-item`,{[`${a}-steps-item-active`]:y<=c-1}),style:{backgroundColor:y<=c-1?C:s,width:v,height:h}})}return l.createElement("div",{className:`${a}-steps-outer`},b,u)},zr=qr;var Hr=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const Gr=["normal","exception","active","success"],Vr=l.forwardRef((e,t)=>{const{prefixCls:r,className:n,rootClassName:i,steps:o,strokeColor:s,percent:a=0,size:u="default",showInfo:c=!0,type:p="line",status:g,format:m,style:h,percentPosition:v={}}=e,b=Hr(e,["prefixCls","className","rootClassName","steps","strokeColor","percent","size","showInfo","type","status","format","style","percentPosition"]),{align:y="end",type:C="outer"}=v,$=Array.isArray(s)?s[0]:s,O=typeof s=="string"||Array.isArray(s)?s:void 0,I=l.useMemo(()=>{if($){const J=typeof $=="string"?$:Object.values($)[0];return new Xt(J).isLight()}return!1},[s]),d=l.useMemo(()=>{var J,B;const X=ke(e);return parseInt(X!==void 0?(J=X??0)===null||J===void 0?void 0:J.toString():(B=a??0)===null||B===void 0?void 0:B.toString(),10)},[a,e.success,e.successPercent]),x=l.useMemo(()=>!Gr.includes(g)&&d>=100?"success":g||"normal",[g,d]),{getPrefixCls:S,direction:P,progress:M}=l.useContext(Ne),j=S("progress",r),[_,ae,Z]=Ur(j),re=p==="line",Q=re&&!o,R=l.useMemo(()=>{if(!c)return null;const J=ke(e);let B;const X=m||(G=>`${G}%`),q=re&&I&&C==="inner";return C==="inner"||m||x!=="exception"&&x!=="success"?B=X(he(a),he(J)):x==="exception"?B=re?l.createElement(zt,null):l.createElement(Ht,null):x==="success"&&(B=re?l.createElement(Gt,null):l.createElement(Vt,null)),l.createElement("span",{className:H(`${j}-text`,{[`${j}-text-bright`]:q,[`${j}-text-${y}`]:Q,[`${j}-text-${C}`]:Q}),title:typeof B=="string"?B:void 0},B)},[c,a,d,x,p,j,m]);let F;p==="line"?F=o?l.createElement(zr,Object.assign({},e,{strokeColor:O,prefixCls:j,steps:typeof o=="object"?o.count:o}),R):l.createElement(Xr,Object.assign({},e,{strokeColor:$,prefixCls:j,direction:P,percentPosition:{align:y,type:C}}),R):(p==="circle"||p==="dashboard")&&(F=l.createElement(Fr,Object.assign({},e,{strokeColor:$,prefixCls:j,progressStatus:x}),R));const se=H(j,`${j}-status-${x}`,{[`${j}-${p==="dashboard"&&"circle"||p}`]:p!=="line",[`${j}-inline-circle`]:p==="circle"&&Le(u,"circle")[0]<=20,[`${j}-line`]:Q,[`${j}-line-align-${y}`]:Q,[`${j}-line-position-${C}`]:Q,[`${j}-steps`]:o,[`${j}-show-info`]:c,[`${j}-${u}`]:typeof u=="string",[`${j}-rtl`]:P==="rtl"},M==null?void 0:M.className,n,i,ae,Z);return _(l.createElement("div",Object.assign({ref:t,style:Object.assign(Object.assign({},M==null?void 0:M.style),h),className:se,role:"progressbar","aria-valuenow":d,"aria-valuemin":0,"aria-valuemax":100},qt(b,["trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"])),F))}),Kr=Vr,Me=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(","),n=e.name||"",i=e.type||"",o=i.replace(/\/.*$/,"");return r.some(function(s){var a=s.trim();if(/^\*(\/\*)?$/.test(s))return!0;if(a.charAt(0)==="."){var u=n.toLowerCase(),c=a.toLowerCase(),p=[c];return(c===".jpg"||c===".jpeg")&&(p=[".jpg",".jpeg"]),p.some(function(g){return u.endsWith(g)})}return/\/\*$/.test(a)?o===a.replace(/\/.*$/,""):i===a?!0:/^\w+$/.test(a)?(Kt(!1,"Upload takes an invalidate 'accept' type '".concat(a,"'.Skip for check.")),!0):!1})}return!0};function Jr(e,t){var r="cannot ".concat(e.method," ").concat(e.action," ").concat(t.status,"'"),n=new Error(r);return n.status=t.status,n.method=e.method,n.url=e.action,n}function ut(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}function Yr(e){var t=new XMLHttpRequest;e.onProgress&&t.upload&&(t.upload.onprogress=function(o){o.total>0&&(o.percent=o.loaded/o.total*100),e.onProgress(o)});var r=new FormData;e.data&&Object.keys(e.data).forEach(function(i){var o=e.data[i];if(Array.isArray(o)){o.forEach(function(s){r.append("".concat(i,"[]"),s)});return}r.append(i,o)}),e.file instanceof Blob?r.append(e.filename,e.file,e.file.name):r.append(e.filename,e.file),t.onerror=function(o){e.onError(o)},t.onload=function(){return t.status<200||t.status>=300?e.onError(Jr(e,t),ut(t)):e.onSuccess(ut(t),t)},t.open(e.method,e.action,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var n=e.headers||{};return n["X-Requested-With"]!==null&&t.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(n).forEach(function(i){n[i]!==null&&t.setRequestHeader(i,n[i])}),t.send(r),{abort:function(){t.abort()}}}var Zr=function(){var e=xe(oe().mark(function t(r,n){var i,o,s,a,u,c,p,g;return oe().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:c=function(){return c=xe(oe().mark(function b(y){return oe().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",new Promise(function(O){y.file(function(I){n(I)?(y.fullPath&&!I.webkitRelativePath&&(Object.defineProperties(I,{webkitRelativePath:{writable:!0}}),I.webkitRelativePath=y.fullPath.replace(/^\//,""),Object.defineProperties(I,{webkitRelativePath:{writable:!1}})),O(I)):O(null)})}));case 1:case"end":return $.stop()}},b)})),c.apply(this,arguments)},u=function(b){return c.apply(this,arguments)},a=function(){return a=xe(oe().mark(function b(y){var C,$,O,I,d;return oe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:C=y.createReader(),$=[];case 2:return S.next=5,new Promise(function(P){C.readEntries(P,function(){return P([])})});case 5:if(O=S.sent,I=O.length,I){S.next=9;break}return S.abrupt("break",12);case 9:for(d=0;d<I;d++)$.push(O[d]);S.next=2;break;case 12:return S.abrupt("return",$);case 13:case"end":return S.stop()}},b)})),a.apply(this,arguments)},s=function(b){return a.apply(this,arguments)},i=[],o=[],r.forEach(function(v){return o.push(v.webkitGetAsEntry())}),p=function(){var v=xe(oe().mark(function b(y,C){var $,O;return oe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(y){d.next=2;break}return d.abrupt("return");case 2:if(y.path=C||"",!y.isFile){d.next=10;break}return d.next=6,u(y);case 6:$=d.sent,$&&i.push($),d.next=15;break;case 10:if(!y.isDirectory){d.next=15;break}return d.next=13,s(y);case 13:O=d.sent,o.push.apply(o,ge(O));case 15:case"end":return d.stop()}},b)}));return function(y,C){return v.apply(this,arguments)}}(),g=0;case 9:if(!(g<o.length)){h.next=15;break}return h.next=12,p(o[g]);case 12:g++,h.next=9;break;case 15:return h.abrupt("return",i);case 16:case"end":return h.stop()}},t)}));return function(r,n){return e.apply(this,arguments)}}(),Qr=+new Date,en=0;function _e(){return"rc-upload-".concat(Qr,"-").concat(++en)}var tn=["component","prefixCls","className","classNames","disabled","id","style","styles","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave","hasControlInside"],rn=function(e){bt(r,e);var t=yt(r);function r(){var n;$t(this,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=t.call.apply(t,[this].concat(o)),V(ne(n),"state",{uid:_e()}),V(ne(n),"reqs",{}),V(ne(n),"fileInput",void 0),V(ne(n),"_isMounted",void 0),V(ne(n),"onChange",function(a){var u=n.props,c=u.accept,p=u.directory,g=a.target.files,m=ge(g).filter(function(h){return!p||Me(h,c)});n.uploadFiles(m),n.reset()}),V(ne(n),"onClick",function(a){var u=n.fileInput;if(u){var c=a.target,p=n.props.onClick;if(c&&c.tagName==="BUTTON"){var g=u.parentNode;g.focus(),c.blur()}u.click(),p&&p(a)}}),V(ne(n),"onKeyDown",function(a){a.key==="Enter"&&n.onClick(a)}),V(ne(n),"onFileDrop",function(){var a=xe(oe().mark(function u(c){var p,g,m;return oe().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(p=n.props.multiple,c.preventDefault(),c.type!=="dragover"){v.next=4;break}return v.abrupt("return");case 4:if(!n.props.directory){v.next=11;break}return v.next=7,Zr(Array.prototype.slice.call(c.dataTransfer.items),function(b){return Me(b,n.props.accept)});case 7:g=v.sent,n.uploadFiles(g),v.next=14;break;case 11:m=ge(c.dataTransfer.files).filter(function(b){return Me(b,n.props.accept)}),p===!1&&(m=m.slice(0,1)),n.uploadFiles(m);case 14:case"end":return v.stop()}},u)}));return function(u){return a.apply(this,arguments)}}()),V(ne(n),"uploadFiles",function(a){var u=ge(a),c=u.map(function(p){return p.uid=_e(),n.processFile(p,u)});Promise.all(c).then(function(p){var g=n.props.onBatchStart;g==null||g(p.map(function(m){var h=m.origin,v=m.parsedFile;return{file:h,parsedFile:v}})),p.filter(function(m){return m.parsedFile!==null}).forEach(function(m){n.post(m)})})}),V(ne(n),"processFile",function(){var a=xe(oe().mark(function u(c,p){var g,m,h,v,b,y,C,$,O;return oe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(g=n.props.beforeUpload,m=c,!g){d.next=14;break}return d.prev=3,d.next=6,g(c,p);case 6:m=d.sent,d.next=12;break;case 9:d.prev=9,d.t0=d.catch(3),m=!1;case 12:if(m!==!1){d.next=14;break}return d.abrupt("return",{origin:c,parsedFile:null,action:null,data:null});case 14:if(h=n.props.action,typeof h!="function"){d.next=21;break}return d.next=18,h(c);case 18:v=d.sent,d.next=22;break;case 21:v=h;case 22:if(b=n.props.data,typeof b!="function"){d.next=29;break}return d.next=26,b(c);case 26:y=d.sent,d.next=30;break;case 29:y=b;case 30:return C=(Ce(m)==="object"||typeof m=="string")&&m?m:c,C instanceof File?$=C:$=new File([C],c.name,{type:c.type}),O=$,O.uid=c.uid,d.abrupt("return",{origin:c,data:y,parsedFile:O,action:v});case 35:case"end":return d.stop()}},u,null,[[3,9]])}));return function(u,c){return a.apply(this,arguments)}}()),V(ne(n),"saveFileInput",function(a){n.fileInput=a}),n}return wt(r,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(i){var o=this,s=i.data,a=i.origin,u=i.action,c=i.parsedFile;if(this._isMounted){var p=this.props,g=p.onStart,m=p.customRequest,h=p.name,v=p.headers,b=p.withCredentials,y=p.method,C=a.uid,$=m||Yr,O={action:u,filename:h,data:s,file:c,headers:v,withCredentials:b,method:y||"post",onProgress:function(d){var x=o.props.onProgress;x==null||x(d,c)},onSuccess:function(d,x){var S=o.props.onSuccess;S==null||S(d,c,x),delete o.reqs[C]},onError:function(d,x){var S=o.props.onError;S==null||S(d,x,c),delete o.reqs[C]}};g(a),this.reqs[C]=$(O)}}},{key:"reset",value:function(){this.setState({uid:_e()})}},{key:"abort",value:function(i){var o=this.reqs;if(i){var s=i.uid?i.uid:i;o[s]&&o[s].abort&&o[s].abort(),delete o[s]}else Object.keys(o).forEach(function(a){o[a]&&o[a].abort&&o[a].abort(),delete o[a]})}},{key:"render",value:function(){var i=this.props,o=i.component,s=i.prefixCls,a=i.className,u=i.classNames,c=u===void 0?{}:u,p=i.disabled,g=i.id,m=i.style,h=i.styles,v=h===void 0?{}:h,b=i.multiple,y=i.accept,C=i.capture,$=i.children,O=i.directory,I=i.openFileDialogOnClick,d=i.onMouseEnter,x=i.onMouseLeave,S=i.hasControlInside,P=mt(i,tn),M=H(V(V(V({},s,!0),"".concat(s,"-disabled"),p),a,a)),j=O?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},_=p?{}:{onClick:I?this.onClick:function(){},onKeyDown:I?this.onKeyDown:function(){},onMouseEnter:d,onMouseLeave:x,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:S?void 0:"0"};return He.createElement(o,Pe({},_,{className:M,role:S?void 0:"button",style:m}),He.createElement("input",Pe({},Jt(P,{aria:!0,data:!0}),{id:g,disabled:p,type:"file",ref:this.saveFileInput,onClick:function(Z){return Z.stopPropagation()},key:this.state.uid,style:Xe({display:"none"},v.input),className:c.input,accept:y},j,{multiple:b,onChange:this.onChange},C!=null?{capture:C}:{})),$)}}]),r}(l.Component);function We(){}var Ve=function(e){bt(r,e);var t=yt(r);function r(){var n;$t(this,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=t.call.apply(t,[this].concat(o)),V(ne(n),"uploader",void 0),V(ne(n),"saveUploader",function(a){n.uploader=a}),n}return wt(r,[{key:"abort",value:function(i){this.uploader.abort(i)}},{key:"render",value:function(){return He.createElement(rn,Pe({},this.props,{ref:this.saveUploader}))}}]),r}(l.Component);V(Ve,"defaultProps",{component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:We,onError:We,onSuccess:We,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0,hasControlInside:!1});const nn=e=>{const{componentCls:t,iconCls:r}=e;return{[`${t}-wrapper`]:{[`${t}-drag`]:{position:"relative",width:"100%",height:"100%",textAlign:"center",background:e.colorFillAlter,border:`${te(e.lineWidth)} dashed ${e.colorBorder}`,borderRadius:e.borderRadiusLG,cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,[t]:{padding:e.padding},[`${t}-btn`]:{display:"table",width:"100%",height:"100%",outline:"none",borderRadius:e.borderRadiusLG,"&:focus-visible":{outline:`${te(e.lineWidthFocus)} solid ${e.colorPrimaryBorder}`}},[`${t}-drag-container`]:{display:"table-cell",verticalAlign:"middle"},[`
          &:not(${t}-disabled):hover,
          &-hover:not(${t}-disabled)
        `]:{borderColor:e.colorPrimaryHover},[`p${t}-drag-icon`]:{marginBottom:e.margin,[r]:{color:e.colorPrimary,fontSize:e.uploadThumbnailSize}},[`p${t}-text`]:{margin:`0 0 ${te(e.marginXXS)}`,color:e.colorTextHeading,fontSize:e.fontSizeLG},[`p${t}-hint`]:{color:e.colorTextDescription,fontSize:e.fontSize},[`&${t}-disabled`]:{[`p${t}-drag-icon ${r},
            p${t}-text,
            p${t}-hint
          `]:{color:e.colorTextDisabled}}}}}},an=nn,on=e=>{const{componentCls:t,antCls:r,iconCls:n,fontSize:i,lineHeight:o,calc:s}=e,a=`${t}-list-item`,u=`${a}-actions`,c=`${a}-action`,p=e.fontHeightSM;return{[`${t}-wrapper`]:{[`${t}-list`]:Object.assign(Object.assign({},Ct()),{lineHeight:e.lineHeight,[a]:{position:"relative",height:s(e.lineHeight).mul(i).equal(),marginTop:e.marginXS,fontSize:i,display:"flex",alignItems:"center",transition:`background-color ${e.motionDurationSlow}`,"&:hover":{backgroundColor:e.controlItemBgHover},[`${a}-name`]:Object.assign(Object.assign({},xt),{padding:`0 ${te(e.paddingXS)}`,lineHeight:o,flex:"auto",transition:`all ${e.motionDurationSlow}`}),[u]:{whiteSpace:"nowrap",[c]:{opacity:0},[n]:{color:e.actionsColor,transition:`all ${e.motionDurationSlow}`},[`
              ${c}:focus-visible,
              &.picture ${c}
            `]:{opacity:1},[`${c}${r}-btn`]:{height:p,border:0,lineHeight:1}},[`${t}-icon ${n}`]:{color:e.colorTextDescription,fontSize:i},[`${a}-progress`]:{position:"absolute",bottom:e.calc(e.uploadProgressOffset).mul(-1).equal(),width:"100%",paddingInlineStart:s(i).add(e.paddingXS).equal(),fontSize:i,lineHeight:0,pointerEvents:"none","> div":{margin:0}}},[`${a}:hover ${c}`]:{opacity:1},[`${a}-error`]:{color:e.colorError,[`${a}-name, ${t}-icon ${n}`]:{color:e.colorError},[u]:{[`${n}, ${n}:hover`]:{color:e.colorError},[c]:{opacity:1}}},[`${t}-list-item-container`]:{transition:`opacity ${e.motionDurationSlow}, height ${e.motionDurationSlow}`,"&::before":{display:"table",width:0,height:0,content:'""'}}})}}},sn=on,ln=e=>{const{componentCls:t}=e,r=new ze("uploadAnimateInlineIn",{from:{width:0,height:0,padding:0,opacity:0,margin:e.calc(e.marginXS).div(-2).equal()}}),n=new ze("uploadAnimateInlineOut",{to:{width:0,height:0,padding:0,opacity:0,margin:e.calc(e.marginXS).div(-2).equal()}}),i=`${t}-animate-inline`;return[{[`${t}-wrapper`]:{[`${i}-appear, ${i}-enter, ${i}-leave`]:{animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseInOutCirc,animationFillMode:"forwards"},[`${i}-appear, ${i}-enter`]:{animationName:r},[`${i}-leave`]:{animationName:n}}},{[`${t}-wrapper`]:Yt(e)},r,n]},cn=ln,dn=e=>{const{componentCls:t,iconCls:r,uploadThumbnailSize:n,uploadProgressOffset:i,calc:o}=e,s=`${t}-list`,a=`${s}-item`;return{[`${t}-wrapper`]:{[`
        ${s}${s}-picture,
        ${s}${s}-picture-card,
        ${s}${s}-picture-circle
      `]:{[a]:{position:"relative",height:o(n).add(o(e.lineWidth).mul(2)).add(o(e.paddingXS).mul(2)).equal(),padding:e.paddingXS,border:`${te(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusLG,"&:hover":{background:"transparent"},[`${a}-thumbnail`]:Object.assign(Object.assign({},xt),{width:n,height:n,lineHeight:te(o(n).add(e.paddingSM).equal()),textAlign:"center",flex:"none",[r]:{fontSize:e.fontSizeHeading2,color:e.colorPrimary},img:{display:"block",width:"100%",height:"100%",overflow:"hidden"}}),[`${a}-progress`]:{bottom:i,width:`calc(100% - ${te(o(e.paddingSM).mul(2).equal())})`,marginTop:0,paddingInlineStart:o(n).add(e.paddingXS).equal()}},[`${a}-error`]:{borderColor:e.colorError,[`${a}-thumbnail ${r}`]:{[`svg path[fill='${et[0]}']`]:{fill:e.colorErrorBg},[`svg path[fill='${et.primary}']`]:{fill:e.colorError}}},[`${a}-uploading`]:{borderStyle:"dashed",[`${a}-name`]:{marginBottom:i}}},[`${s}${s}-picture-circle ${a}`]:{[`&, &::before, ${a}-thumbnail`]:{borderRadius:"50%"}}}}},un=e=>{const{componentCls:t,iconCls:r,fontSizeLG:n,colorTextLightSolid:i,calc:o}=e,s=`${t}-list`,a=`${s}-item`,u=e.uploadPicCardSize;return{[`
      ${t}-wrapper${t}-picture-card-wrapper,
      ${t}-wrapper${t}-picture-circle-wrapper
    `]:Object.assign(Object.assign({},Ct()),{display:"block",[`${t}${t}-select`]:{width:u,height:u,textAlign:"center",verticalAlign:"top",backgroundColor:e.colorFillAlter,border:`${te(e.lineWidth)} dashed ${e.colorBorder}`,borderRadius:e.borderRadiusLG,cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,[`> ${t}`]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},[`&:not(${t}-disabled):hover`]:{borderColor:e.colorPrimary}},[`${s}${s}-picture-card, ${s}${s}-picture-circle`]:{display:"flex",flexWrap:"wrap","@supports not (gap: 1px)":{"& > *":{marginBlockEnd:e.marginXS,marginInlineEnd:e.marginXS}},"@supports (gap: 1px)":{gap:e.marginXS},[`${s}-item-container`]:{display:"inline-block",width:u,height:u,verticalAlign:"top"},"&::after":{display:"none"},"&::before":{display:"none"},[a]:{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:`calc(100% - ${te(o(e.paddingXS).mul(2).equal())})`,height:`calc(100% - ${te(o(e.paddingXS).mul(2).equal())})`,backgroundColor:e.colorBgMask,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'" "'}},[`${a}:hover`]:{[`&::before, ${a}-actions`]:{opacity:1}},[`${a}-actions`]:{position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:`all ${e.motionDurationSlow}`,[`
            ${r}-eye,
            ${r}-download,
            ${r}-delete
          `]:{zIndex:10,width:n,margin:`0 ${te(e.marginXXS)}`,fontSize:n,cursor:"pointer",transition:`all ${e.motionDurationSlow}`,color:i,"&:hover":{color:i},svg:{verticalAlign:"baseline"}}},[`${a}-thumbnail, ${a}-thumbnail img`]:{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"},[`${a}-name`]:{display:"none",textAlign:"center"},[`${a}-file + ${a}-name`]:{position:"absolute",bottom:e.margin,display:"block",width:`calc(100% - ${te(o(e.paddingXS).mul(2).equal())})`},[`${a}-uploading`]:{[`&${a}`]:{backgroundColor:e.colorFillAlter},[`&::before, ${r}-eye, ${r}-download, ${r}-delete`]:{display:"none"}},[`${a}-progress`]:{bottom:e.marginXL,width:`calc(100% - ${te(o(e.paddingXS).mul(2).equal())})`,paddingInlineStart:0}}}),[`${t}-wrapper${t}-picture-circle-wrapper`]:{[`${t}${t}-select`]:{borderRadius:"50%"}}}},pn=e=>{const{componentCls:t}=e;return{[`${t}-rtl`]:{direction:"rtl"}}},mn=pn,fn=e=>{const{componentCls:t,colorTextDisabled:r}=e;return{[`${t}-wrapper`]:Object.assign(Object.assign({},vt(e)),{[t]:{outline:0,"input[type='file']":{cursor:"pointer"}},[`${t}-select`]:{display:"inline-block"},[`${t}-disabled`]:{color:r,cursor:"not-allowed"}})}},gn=e=>({actionsColor:e.colorTextDescription}),hn=gt("Upload",e=>{const{fontSizeHeading3:t,fontHeight:r,lineWidth:n,controlHeightLG:i,calc:o}=e,s=ht(e,{uploadThumbnailSize:o(t).mul(2).equal(),uploadProgressOffset:o(o(r).div(2)).add(n).equal(),uploadPicCardSize:o(i).mul(2.55).equal()});return[fn(s),an(s),dn(s),un(s),sn(s),cn(s),mn(s),Zt(s)]},gn);function Oe(e){return Object.assign(Object.assign({},e),{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.name,size:e.size,type:e.type,uid:e.uid,percent:0,originFileObj:e})}function De(e,t){const r=ge(t),n=r.findIndex(i=>{let{uid:o}=i;return o===e.uid});return n===-1?r.push(e):r[n]=e,r}function Be(e,t){const r=e.uid!==void 0?"uid":"name";return t.filter(n=>n[r]===e[r])[0]}function vn(e,t){const r=e.uid!==void 0?"uid":"name",n=t.filter(i=>i[r]!==e[r]);return n.length===t.length?null:n}const bn=function(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"").split("/"),n=t[t.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(n)||[""])[0]},Ot=e=>e.indexOf("image/")===0,yn=e=>{if(e.type&&!e.thumbUrl)return Ot(e.type);const t=e.thumbUrl||e.url||"",r=bn(t);return/^data:image\//.test(t)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(r)?!0:!(/^data:/.test(t)||r)},fe=200;function $n(e){return new Promise(t=>{if(!e.type||!Ot(e.type)){t("");return}const r=document.createElement("canvas");r.width=fe,r.height=fe,r.style.cssText=`position: fixed; left: 0; top: 0; width: ${fe}px; height: ${fe}px; z-index: 9999; display: none;`,document.body.appendChild(r);const n=r.getContext("2d"),i=new Image;if(i.onload=()=>{const{width:o,height:s}=i;let a=fe,u=fe,c=0,p=0;o>s?(u=s*(fe/o),p=-(u-a)/2):(a=o*(fe/s),c=-(a-u)/2),n.drawImage(i,c,p,a,u);const g=r.toDataURL();document.body.removeChild(r),window.URL.revokeObjectURL(i.src),t(g)},i.crossOrigin="anonymous",e.type.startsWith("image/svg+xml")){const o=new FileReader;o.onload=()=>{o.result&&typeof o.result=="string"&&(i.src=o.result)},o.readAsDataURL(e)}else if(e.type.startsWith("image/gif")){const o=new FileReader;o.onload=()=>{o.result&&t(o.result)},o.readAsDataURL(e)}else i.src=window.URL.createObjectURL(e)})}const wn=l.forwardRef((e,t)=>{let{prefixCls:r,className:n,style:i,locale:o,listType:s,file:a,items:u,progress:c,iconRender:p,actionIconRender:g,itemRender:m,isImgUrl:h,showPreviewIcon:v,showRemoveIcon:b,showDownloadIcon:y,previewIcon:C,removeIcon:$,downloadIcon:O,extra:I,onPreview:d,onDownload:x,onClose:S}=e;var P,M;const{status:j}=a,[_,ae]=l.useState(j);l.useEffect(()=>{j!=="removed"&&ae(j)},[j]);const[Z,re]=l.useState(!1);l.useEffect(()=>{const T=setTimeout(()=>{re(!0)},300);return()=>{clearTimeout(T)}},[]);const Q=p(a);let R=l.createElement("div",{className:`${r}-icon`},Q);if(s==="picture"||s==="picture-card"||s==="picture-circle")if(_==="uploading"||!a.thumbUrl&&!a.url){const T=H(`${r}-list-item-thumbnail`,{[`${r}-list-item-file`]:_!=="uploading"});R=l.createElement("div",{className:T},Q)}else{const T=h!=null&&h(a)?l.createElement("img",{src:a.thumbUrl||a.url,alt:a.name,className:`${r}-list-item-image`,crossOrigin:a.crossOrigin}):Q,A=H(`${r}-list-item-thumbnail`,{[`${r}-list-item-file`]:h&&!h(a)});R=l.createElement("a",{className:A,onClick:ue=>d(a,ue),href:a.url||a.thumbUrl,target:"_blank",rel:"noopener noreferrer"},T)}const F=H(`${r}-list-item`,`${r}-list-item-${_}`),se=typeof a.linkProps=="string"?JSON.parse(a.linkProps):a.linkProps,J=b?g((typeof $=="function"?$(a):$)||l.createElement(Qt,null),()=>S(a),r,o.removeFile,!0):null,B=y&&_==="done"?g((typeof O=="function"?O(a):O)||l.createElement(er,null),()=>x(a),r,o.downloadFile):null,X=s!=="picture-card"&&s!=="picture-circle"&&l.createElement("span",{key:"download-delete",className:H(`${r}-list-item-actions`,{picture:s==="picture"})},B,J),q=typeof I=="function"?I(a):I,G=q&&l.createElement("span",{className:`${r}-list-item-extra`},q),w=H(`${r}-list-item-name`),N=a.url?l.createElement("a",Object.assign({key:"view",target:"_blank",rel:"noopener noreferrer",className:w,title:a.name},se,{href:a.url,onClick:T=>d(a,T)}),a.name,G):l.createElement("span",{key:"view",className:w,onClick:T=>d(a,T),title:a.name},a.name,G),z=v&&(a.url||a.thumbUrl)?l.createElement("a",{href:a.url||a.thumbUrl,target:"_blank",rel:"noopener noreferrer",onClick:T=>d(a,T),title:o.previewFile},typeof C=="function"?C(a):C||l.createElement(tr,null)):null,W=(s==="picture-card"||s==="picture-circle")&&_!=="uploading"&&l.createElement("span",{className:`${r}-list-item-actions`},z,_==="done"&&B,J),{getPrefixCls:ie}=l.useContext(Ne),ce=ie(),le=l.createElement("div",{className:F},R,N,X,W,Z&&l.createElement(St,{motionName:`${ce}-fade`,visible:_==="uploading",motionDeadline:2e3},T=>{let{className:A}=T;const ue="percent"in a?l.createElement(Kr,Object.assign({},c,{type:"line",percent:a.percent,"aria-label":a["aria-label"],"aria-labelledby":a["aria-labelledby"]})):null;return l.createElement("div",{className:H(`${r}-list-item-progress`,A)},ue)})),me=a.response&&typeof a.response=="string"?a.response:((P=a.error)===null||P===void 0?void 0:P.statusText)||((M=a.error)===null||M===void 0?void 0:M.message)||o.uploadError,de=_==="error"?l.createElement(ft,{title:me,getPopupContainer:T=>T.parentNode},le):le;return l.createElement("div",{className:H(`${r}-list-item-container`,n),style:i,ref:t},m?m(de,a,u,{download:x.bind(null,a),preview:d.bind(null,a),remove:S.bind(null,a)}):de)}),Cn=wn,xn=(e,t)=>{const{listType:r="text",previewFile:n=$n,onPreview:i,onDownload:o,onRemove:s,locale:a,iconRender:u,isImageUrl:c=yn,prefixCls:p,items:g=[],showPreviewIcon:m=!0,showRemoveIcon:h=!0,showDownloadIcon:v=!1,removeIcon:b,previewIcon:y,downloadIcon:C,extra:$,progress:O={size:[-1,2],showInfo:!1},appendAction:I,appendActionVisible:d=!0,itemRender:x,disabled:S}=e,P=br(),[M,j]=l.useState(!1);l.useEffect(()=>{r!=="picture"&&r!=="picture-card"&&r!=="picture-circle"||(g||[]).forEach(w=>{typeof document>"u"||typeof window>"u"||!window.FileReader||!window.File||!(w.originFileObj instanceof File||w.originFileObj instanceof Blob)||w.thumbUrl!==void 0||(w.thumbUrl="",n&&n(w.originFileObj).then(N=>{w.thumbUrl=N||"",P()}))})},[r,g,n]),l.useEffect(()=>{j(!0)},[]);const _=(w,N)=>{if(i)return N==null||N.preventDefault(),i(w)},ae=w=>{typeof o=="function"?o(w):w.url&&window.open(w.url)},Z=w=>{s==null||s(w)},re=w=>{if(u)return u(w,r);const N=w.status==="uploading",z=c!=null&&c(w)?l.createElement(ar,null):l.createElement(ir,null);let W=N?l.createElement(Ge,null):l.createElement(or,null);return r==="picture"?W=N?l.createElement(Ge,null):z:(r==="picture-card"||r==="picture-circle")&&(W=N?a.uploading:z),W},Q=(w,N,z,W,ie)=>{const ce={type:"text",size:"small",title:W,onClick:le=>{var me,de;N(),l.isValidElement(w)&&((de=(me=w.props).onClick)===null||de===void 0||de.call(me,le))},className:`${z}-list-item-action`};if(ie&&(ce.disabled=S),l.isValidElement(w)){const le=tt(w,Object.assign(Object.assign({},w.props),{onClick:()=>{}}));return l.createElement(ve,Object.assign({},ce,{icon:le}))}return l.createElement(ve,Object.assign({},ce),l.createElement("span",null,w))};l.useImperativeHandle(t,()=>({handlePreview:_,handleDownload:ae}));const{getPrefixCls:R}=l.useContext(Ne),F=R("upload",p),se=R(),J=H(`${F}-list`,`${F}-list-${r}`),B=ge(g.map(w=>({key:w.uid,file:w})));let q={motionDeadline:2e3,motionName:`${F}-${r==="picture-card"||r==="picture-circle"?"animate-inline":"animate"}`,keys:B,motionAppear:M};const G=l.useMemo(()=>{const w=Object.assign({},rr(se));return delete w.onAppearEnd,delete w.onEnterEnd,delete w.onLeaveEnd,w},[se]);return r!=="picture-card"&&r!=="picture-circle"&&(q=Object.assign(Object.assign({},G),q)),l.createElement("div",{className:J},l.createElement(nr,Object.assign({},q,{component:!1}),w=>{let{key:N,file:z,className:W,style:ie}=w;return l.createElement(Cn,{key:N,locale:a,prefixCls:F,className:W,style:ie,file:z,items:g,progress:O,listType:r,isImgUrl:c,showPreviewIcon:m,showRemoveIcon:h,showDownloadIcon:v,removeIcon:b,previewIcon:y,downloadIcon:C,extra:$,iconRender:re,actionIconRender:Q,itemRender:x,onPreview:_,onDownload:ae,onClose:Z})}),I&&l.createElement(St,Object.assign({},q,{visible:d,forceRender:!0}),w=>{let{className:N,style:z}=w;return tt(I,W=>({className:H(W.className,N),style:Object.assign(Object.assign(Object.assign({},z),{pointerEvents:N?"none":void 0}),W.style)}))}))},Sn=l.forwardRef(xn),In=Sn;var jn=globalThis&&globalThis.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{c(n.next(p))}catch(g){s(g)}}function u(p){try{c(n.throw(p))}catch(g){s(g)}}function c(p){p.done?o(p.value):i(p.value).then(a,u)}c((n=n.apply(e,t||[])).next())})};const je=`__LIST_IGNORE_${Date.now()}__`,En=(e,t)=>{const{fileList:r,defaultFileList:n,onRemove:i,showUploadList:o=!0,listType:s="text",onPreview:a,onDownload:u,onChange:c,onDrop:p,previewFile:g,disabled:m,locale:h,iconRender:v,isImageUrl:b,progress:y,prefixCls:C,className:$,type:O="select",children:I,style:d,itemRender:x,maxCount:S,data:P={},multiple:M=!1,hasControlInside:j=!0,action:_="",accept:ae="",supportServerRender:Z=!0,rootClassName:re}=e,Q=l.useContext(sr),R=m??Q,[F,se]=lr(n||[],{value:r,postState:E=>E??[]}),[J,B]=l.useState("drop"),X=l.useRef(null),q=l.useRef(null);l.useMemo(()=>{const E=Date.now();(r||[]).forEach((k,U)=>{!k.uid&&!Object.isFrozen(k)&&(k.uid=`__AUTO__${E}_${U}__`)})},[r]);const G=(E,k,U)=>{let D=ge(k),L=!1;S===1?D=D.slice(-1):S&&(L=D.length>S,D=D.slice(0,S)),rt.flushSync(()=>{se(D)});const ee={file:E,fileList:D};U&&(ee.event=U),(!L||E.status==="removed"||D.some(be=>be.uid===E.uid))&&rt.flushSync(()=>{c==null||c(ee)})},w=(E,k)=>jn(void 0,void 0,void 0,function*(){const{beforeUpload:U,transformFile:D}=e;let L=E;if(U){const ee=yield U(E,k);if(ee===!1)return!1;if(delete E[je],ee===je)return Object.defineProperty(E,je,{value:!0,configurable:!0}),!1;typeof ee=="object"&&ee&&(L=ee)}return D&&(L=yield D(L)),L}),N=E=>{const k=E.filter(L=>!L.file[je]);if(!k.length)return;const U=k.map(L=>Oe(L.file));let D=ge(F);U.forEach(L=>{D=De(L,D)}),U.forEach((L,ee)=>{let be=L;if(k[ee].parsedFile)L.status="uploading";else{const{originFileObj:we}=L;let ye;try{ye=new File([we],we.name,{type:we.type})}catch{ye=new Blob([we],{type:we.type}),ye.name=we.name,ye.lastModifiedDate=new Date,ye.lastModified=new Date().getTime()}ye.uid=L.uid,be=ye}G(be,D)})},z=(E,k,U)=>{try{typeof E=="string"&&(E=JSON.parse(E))}catch{}if(!Be(k,F))return;const D=Oe(k);D.status="done",D.percent=100,D.response=E,D.xhr=U;const L=De(D,F);G(D,L)},W=(E,k)=>{if(!Be(k,F))return;const U=Oe(k);U.status="uploading",U.percent=E.percent;const D=De(U,F);G(U,D,E)},ie=(E,k,U)=>{if(!Be(U,F))return;const D=Oe(U);D.error=E,D.response=k,D.status="error";const L=De(D,F);G(D,L)},ce=E=>{let k;Promise.resolve(typeof i=="function"?i(E):i).then(U=>{var D;if(U===!1)return;const L=vn(E,F);L&&(k=Object.assign(Object.assign({},E),{status:"removed"}),F==null||F.forEach(ee=>{const be=k.uid!==void 0?"uid":"name";ee[be]===k[be]&&!Object.isFrozen(ee)&&(ee.status="removed")}),(D=X.current)===null||D===void 0||D.abort(k),G(k,L))})},le=E=>{B(E.type),E.type==="drop"&&(p==null||p(E))};l.useImperativeHandle(t,()=>({onBatchStart:N,onSuccess:z,onProgress:W,onError:ie,fileList:F,upload:X.current,nativeElement:q.current}));const{getPrefixCls:me,direction:de,upload:T}=l.useContext(Ne),A=me("upload",C),ue=Object.assign(Object.assign({onBatchStart:N,onError:ie,onProgress:W,onSuccess:z},e),{data:P,multiple:M,action:_,accept:ae,supportServerRender:Z,prefixCls:A,disabled:R,beforeUpload:w,onChange:void 0,hasControlInside:j});delete ue.className,delete ue.style,(!I||R)&&delete ue.id;const Je=`${A}-wrapper`,[Re,Ye,Pt]=hn(A,Je),[kt]=cr("Upload",dr.Upload),{showRemoveIcon:Ze,showPreviewIcon:Ft,showDownloadIcon:Nt,removeIcon:Lt,previewIcon:Rt,downloadIcon:Tt,extra:At}=typeof o=="boolean"?{}:o,Ut=typeof Ze>"u"?!R:!!Ze,Te=(E,k)=>o?l.createElement(In,{prefixCls:A,listType:s,items:F,previewFile:g,onPreview:a,onDownload:u,onRemove:ce,showRemoveIcon:Ut,showPreviewIcon:Ft,showDownloadIcon:Nt,removeIcon:Lt,previewIcon:Rt,downloadIcon:Tt,iconRender:v,extra:At,locale:Object.assign(Object.assign({},kt),h),isImageUrl:b,progress:y,appendAction:E,appendActionVisible:k,itemRender:x,disabled:R}):E,Ae=H(Je,$,re,Ye,Pt,T==null?void 0:T.className,{[`${A}-rtl`]:de==="rtl",[`${A}-picture-card-wrapper`]:s==="picture-card",[`${A}-picture-circle-wrapper`]:s==="picture-circle"}),Mt=Object.assign(Object.assign({},T==null?void 0:T.style),d);if(O==="drag"){const E=H(Ye,A,`${A}-drag`,{[`${A}-drag-uploading`]:F.some(k=>k.status==="uploading"),[`${A}-drag-hover`]:J==="dragover",[`${A}-disabled`]:R,[`${A}-rtl`]:de==="rtl"});return Re(l.createElement("span",{className:Ae,ref:q},l.createElement("div",{className:E,style:Mt,onDrop:le,onDragOver:le,onDragLeave:le},l.createElement(Ve,Object.assign({},ue,{ref:X,className:`${A}-btn`}),l.createElement("div",{className:`${A}-drag-container`},I))),Te()))}const _t=H(A,`${A}-select`,{[`${A}-disabled`]:R}),Qe=l.createElement("div",{className:_t,style:I?void 0:{display:"none"}},l.createElement(Ve,Object.assign({},ue,{ref:X})));return Re(s==="picture-card"||s==="picture-circle"?l.createElement("span",{className:Ae,ref:q},Te(Qe,!!I)):l.createElement("span",{className:Ae,ref:q},Qe,Te()))},On=l.forwardRef(En),Dt=On;var Dn=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const Pn=l.forwardRef((e,t)=>{var{style:r,height:n,hasControlInside:i=!1}=e,o=Dn(e,["style","height","hasControlInside"]);return l.createElement(Dt,Object.assign({ref:t,hasControlInside:i},o,{type:"drag",style:Object.assign(Object.assign({},r),{height:n})}))}),kn=Pn,Ke=Dt;Ke.Dragger=kn;Ke.LIST_IGNORE=je;const Fn=Ke,pt=e=>{const t=ur(n=>n.userInfo.role),r=pr("layout");return e.auth?r.buttonList.includes(e.auth)||t===1?f.jsx(ve,{...e,children:e.children}):f.jsx(f.Fragment,{}):f.jsx(ve,{...e,children:e.children})},Nn=e=>{const[t]=K.useForm(),[r,n]=l.useState(!1),[i,o]=l.useState("create"),[s,a]=l.useState(""),[u,c]=l.useState(!1),[p,g]=l.useState([]),[m,h]=l.useState([]);l.useImperativeHandle(e.mRef,()=>({open:v}));const v=(d,x)=>{o(d),n(!0),d==="edit"&&x&&(t.setFieldsValue(x),a(x.userImg))},b=async()=>{if(await t.validateFields()){const x={...t.getFieldsValue(),userImg:s};i==="create"?(await Ee.createUser(x),pe.success("创建成功")):(await Ee.editUser(x),pe.success("编辑成功")),y(),e.update()}},y=()=>{n(!1),a(""),t.resetFields()},C=d=>{const x=d.type==="image/jpeg"||d.type==="image/png";if(!x)return pe.error("只能上传 JPG 或 PNG 图片!"),!1;const S=d.size/1024/1024<2;return S?x&&S:(pe.error("图片大小不能超过 2MB!"),!1)},$=d=>{if(d.file.status==="uploading"){c(!0),a("");return}if(d.file.status==="done"){const{code:x,msg:S,data:P}=d.file.response;x===0?a(P.file):pe.error(S),c(!1)}d.file.status==="error"&&(c(!1),pe.error("上传失败，请稍后再试"))},O=async()=>{const d=await Ee.getDeptList();g(d)},I=async()=>{const d=await vr.getAllRoleList();h(d)};return l.useEffect(()=>{O(),I()},[]),f.jsx(jt,{title:i==="create"?"创建用户":"编辑用户",width:600,okText:"确定",cancelText:"取消",open:r,onOk:b,onCancel:y,children:f.jsxs(K,{form:t,labelCol:{span:4},wrapperCol:{span:20},labelAlign:"right",children:[f.jsx(K.Item,{name:"userId",hidden:!0,children:f.jsx($e,{})}),f.jsx(K.Item,{label:"用户名称",name:"userName",rules:[{required:!0,message:"请输入用户名称"},{min:5,max:18,message:"用户名称长度为5-18位"}],children:f.jsx($e,{placeholder:"请输入用户名称"})}),f.jsx(K.Item,{label:"用户邮箱",name:"userEmail",rules:[{required:!0,message:"请输入用户邮箱"},{type:"email",message:"请输入正确的邮箱"},{pattern:/^\w+@mars.com/,message:"邮箱必须以@mars.com结尾"}],children:f.jsx($e,{placeholder:"请输入用户邮箱",disabled:i==="edit"})}),f.jsx(K.Item,{label:"手机号",name:"mobile",rules:[{len:11,message:"请输入11位的手机号"},{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号"}],children:f.jsx($e,{type:"number",placeholder:"请输入手机号"})}),f.jsx(K.Item,{label:"部门",name:"deptId",rules:[{required:!0,message:"请输入部门"}],children:f.jsx(it,{placeholder:"请选择部门",allowClear:!0,treeDefaultExpandAll:!0,showCheckedStrategy:it.SHOW_ALL,fieldNames:{label:"deptName",value:"_id"},treeData:p})}),f.jsx(K.Item,{label:"岗位",name:"job",children:f.jsx($e,{placeholder:"请输入岗位"})}),f.jsx(K.Item,{label:"状态",name:"state",children:f.jsxs(Y,{placeholder:"请选择状态",children:[f.jsx(Y.Option,{value:1,children:"在职"}),f.jsx(Y.Option,{value:2,children:"离职"}),f.jsx(Y.Option,{value:3,children:"试用期"})]})}),f.jsx(K.Item,{label:"系统角色",name:"roleList",children:f.jsx(Y,{placeholder:"请选择系统角色",children:m.map(d=>f.jsx(Y.Option,{value:d._id,children:d.roleName},d._id))})}),f.jsx(K.Item,{label:"用户头像",children:f.jsx(Fn,{listType:"picture-card",showUploadList:!1,headers:{Authorization:`Bearer ${mr.get("token")}`,icode:"4F45D180586DD981"},action:"/api/users/upload",beforeUpload:C,onChange:$,children:s?f.jsx("img",{src:s,style:{width:"100%"}}):f.jsxs("div",{children:[u?f.jsx(Ge,{}):f.jsx(fr,{}),f.jsx("div",{style:{marginTop:8},children:"上传头像"})]})})})]})})},Ln=({form:e,onSearch:t,onReset:r})=>f.jsxs(K,{className:"searchForm",form:e,layout:"inline",initialValues:{state:0},children:[f.jsxs(nt,{style:{width:"100%"},children:[f.jsx(Se,{span:8,children:f.jsx(K.Item,{label:"用户ID",name:"userId",children:f.jsx($e,{placeholder:"请输入用户ID",allowClear:!0})})}),f.jsx(Se,{span:8,children:f.jsx(K.Item,{label:"用户名称",name:"userName",children:f.jsx($e,{placeholder:"请输入用户名称",allowClear:!0})})}),f.jsx(Se,{span:8,children:f.jsx(K.Item,{label:"状态",name:"state",style:{marginInlineEnd:0},children:f.jsxs(Y,{placeholder:"请选择状态",allowClear:!0,children:[f.jsx(Y.Option,{value:0,children:"所有"}),f.jsx(Y.Option,{value:1,children:"在职"}),f.jsx(Y.Option,{value:2,children:"离职"}),f.jsx(Y.Option,{value:3,children:"试用期"})]})})})]}),f.jsxs(nt,{justify:"end",style:{width:"100%",marginTop:16},children:[f.jsx(Se,{span:8,children:f.jsx(K.Item,{label:"用户角色",name:"role",children:f.jsxs(Y,{placeholder:"请选择用户角色",allowClear:!0,children:[f.jsx(Y.Option,{value:0,children:"超级管理员"}),f.jsx(Y.Option,{value:1,children:"管理员"}),f.jsx(Y.Option,{value:2,children:"体验管理员"}),f.jsx(Y.Option,{value:3,children:"普通用户"})]})})}),f.jsx(Se,{span:8,offset:8,style:{textAlign:"right"},children:f.jsxs(It,{children:[f.jsx(ve,{type:"primary",onClick:t,children:"搜索"}),f.jsx(ve,{type:"default",onClick:r,children:"重置"})]})})]})]}),Rn=({handleClickEdit:e,handleClickDelete:t})=>[{title:"用户ID",dataIndex:"userId",key:"userId"},{title:"用户名",dataIndex:"userName",key:"userName"},{title:"用户邮箱",dataIndex:"userEmail",key:"userEmail"},{title:"用户角色",dataIndex:"role",key:"role",render:n=>({0:"超级管理员",1:"管理员",2:"体验管理员",3:"普通用户"})[n]},{title:"用户状态",dataIndex:"state",key:"state",render:n=>({1:"在职",2:"离职",3:"试用期"})[n]},{title:"注册时间",dataIndex:"createTime",key:"createTime",render:n=>at(n)},{title:"最后登录时间",dataIndex:"lastLoginTime",key:"lastLoginTime",render:n=>at(n)},{title:"操作",key:"action",render:n=>f.jsxs(It,{children:[f.jsx(ve,{type:"text",onClick:()=>e(n),children:"编辑"}),f.jsx(ve,{type:"text",danger:!0,onClick:()=>t(n.userId),children:"删除"})]})}],Bn=()=>{const[e]=K.useForm(),[t,r]=l.useState([]),n=l.useRef(),i=({current:m,pageSize:h},v)=>Ee.getUserList({...v,pageNum:m,pageSize:h}).then(b=>({list:b.list,total:b.page.total})),{tableProps:o,search:s}=gr(i,{form:e,defaultPageSize:10}),a=()=>{var m;(m=n.current)==null||m.open("create")},u=()=>{if(console.log("批量删除"),t.length===0){pe.error("请选择要删除的用户");return}p(t)},c=m=>{var h;(h=n.current)==null||h.open("edit",m)},p=m=>{jt.confirm({title:Array.isArray(m)?"确定删除这些用户吗？":"确定删除该用户吗？",okText:"确定",cancelText:"取消",onOk:async()=>{g(Array.isArray(m)?m:[m])}})},g=async m=>{try{await Ee.deleteUser({userIds:m}),pe.success("删除成功"),r([]),s.submit()}catch{pe.error("删除失败")}};return f.jsxs("div",{className:"user-list",children:[f.jsx(Ln,{form:e,onSearch:s.submit,onReset:s.reset}),f.jsxs("div",{className:"baseTable",children:[f.jsxs("div",{className:"headerWrapper",children:[f.jsx("div",{className:"title",children:"用户列表"}),f.jsxs("div",{className:"action",children:[f.jsx(pt,{auth:"user@create",type:"primary",onClick:a,children:"新增"}),f.jsx(pt,{type:"primary",danger:!0,onClick:u,children:"批量删除"})]})]}),f.jsx(hr,{rowKey:"userId",bordered:!0,rowSelection:{type:"checkbox",selectedRowKeys:t,onChange:m=>{r(m)}},columns:Rn({handleClickEdit:c,handleClickDelete:p}),...o,loading:!1})]}),f.jsx(Nn,{mRef:n,update:()=>{s.submit()}})]})};export{Bn as default};
